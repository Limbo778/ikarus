import{c as fe,g as dt,B as js,X as ze,Y as Ge,f as xt,r as o,j as e,a as B,b as mt,d as ht,e as fs,u as me,A as ut,P as J,h as F,i as je,k as vs,l as pt,m as jt,R as ft,S as vt,F as gt,D as Nt,C as yt,n as es,o as wt,p as bt,V as St,q as Ct,s as Tt,t as is,v as Pt,w as Rt,x as cs,y as gs,z as Et,E as At,G as be,H as de,I as q,L as k,T as Ns,J as ys,K as ce,U as os,M as ds,N as xs,O as ws,Q as oe,W as E,Z as A,_ as I,$ as M,a0 as It,a1 as V,a2 as ss,a3 as Mt,a4 as xe,a5 as ts,a6 as as,a7 as ns,a8 as rs,a9 as kt,aa as Ee,ab as Dt,ac as pe,ad as bs,ae as Lt,af as _t,ag as Ss,ah as ms,ai as Ot,aj as hs,ak as us,al as Ft,am as Bt,an as Ae,ao as Be}from"./index-DED8QLL3.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=fe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=fe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=fe("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=fe("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=fe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=fe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var Wt=dt({chartName:"BarChart",GraphicalChild:js,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ze},{axisType:"yAxis",AxisComp:Ge}],formatAxisMap:xt});const Ie=o.forwardRef(({className:n,...a},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:B("w-full caption-bottom text-sm",n),...a})}));Ie.displayName="Table";const Me=o.forwardRef(({className:n,...a},s)=>e.jsx("thead",{ref:s,className:B("[&_tr]:border-b",n),...a}));Me.displayName="TableHeader";const ke=o.forwardRef(({className:n,...a},s)=>e.jsx("tbody",{ref:s,className:B("[&_tr:last-child]:border-0",n),...a}));ke.displayName="TableBody";const zt=o.forwardRef(({className:n,...a},s)=>e.jsx("tfoot",{ref:s,className:B("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...a}));zt.displayName="TableFooter";const $=o.forwardRef(({className:n,...a},s)=>e.jsx("tr",{ref:s,className:B("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...a}));$.displayName="TableRow";const b=o.forwardRef(({className:n,...a},s)=>e.jsx("th",{ref:s,className:B("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...a}));b.displayName="TableHead";const y=o.forwardRef(({className:n,...a},s)=>e.jsx("td",{ref:s,className:B("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...a}));y.displayName="TableCell";const Gt=o.forwardRef(({className:n,...a},s)=>e.jsx("caption",{ref:s,className:B("mt-4 text-sm text-muted-foreground",n),...a}));Gt.displayName="TableCaption";var Yt=[" ","Enter","ArrowUp","ArrowDown"],Qt=[" ","Enter"],He="Select",[qe,$e,Xt]=mt(He),[De,Ea]=ht(He,[Xt,fs]),Ue=fs(),[Zt,ve]=De(He),[Jt,ea]=De(He),Cs=n=>{const{__scopeSelect:a,children:s,open:l,defaultOpen:m,onOpenChange:i,value:c,defaultValue:r,onValueChange:d,dir:t,name:f,autoComplete:x,disabled:N,required:w,form:h}=n,u=Ue(a),[g,S]=o.useState(null),[j,p]=o.useState(null),[_,H]=o.useState(!1),ne=Tt(t),[D=!1,W]=is({prop:l,defaultProp:m,onChange:i}),[ee,re]=is({prop:c,defaultProp:r,onChange:d}),G=o.useRef(null),Y=g?h||!!g.closest("form"):!0,[se,Q]=o.useState(new Set),X=Array.from(se).map(O=>O.props.value).join(";");return e.jsx(Pt,{...u,children:e.jsxs(Zt,{required:w,scope:a,trigger:g,onTriggerChange:S,valueNode:j,onValueNodeChange:p,valueNodeHasChildren:_,onValueNodeHasChildrenChange:H,contentId:es(),value:ee,onValueChange:re,open:D,onOpenChange:W,dir:ne,triggerPointerDownPosRef:G,disabled:N,children:[e.jsx(qe.Provider,{scope:a,children:e.jsx(Jt,{scope:n.__scopeSelect,onNativeOptionAdd:o.useCallback(O=>{Q(z=>new Set(z).add(O))},[]),onNativeOptionRemove:o.useCallback(O=>{Q(z=>{const Z=new Set(z);return Z.delete(O),Z})},[]),children:s})}),Y?e.jsxs(Qs,{"aria-hidden":!0,required:w,tabIndex:-1,name:f,autoComplete:x,value:ee,onChange:O=>re(O.target.value),disabled:N,form:h,children:[ee===void 0?e.jsx("option",{value:""}):null,Array.from(se)]},X):null]})})};Cs.displayName=He;var Ts="SelectTrigger",Ps=o.forwardRef((n,a)=>{const{__scopeSelect:s,disabled:l=!1,...m}=n,i=Ue(s),c=ve(Ts,s),r=c.disabled||l,d=me(a,c.onTriggerChange),t=$e(s),f=o.useRef("touch"),[x,N,w]=Xs(u=>{const g=t().filter(p=>!p.disabled),S=g.find(p=>p.value===c.value),j=Zs(g,u,S);j!==void 0&&c.onValueChange(j.value)}),h=u=>{r||(c.onOpenChange(!0),w()),u&&(c.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(ut,{asChild:!0,...i,children:e.jsx(J.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:r,"data-disabled":r?"":void 0,"data-placeholder":Ys(c.value)?"":void 0,...m,ref:d,onClick:F(m.onClick,u=>{u.currentTarget.focus(),f.current!=="mouse"&&h(u)}),onPointerDown:F(m.onPointerDown,u=>{f.current=u.pointerType;const g=u.target;g.hasPointerCapture(u.pointerId)&&g.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(h(u),u.preventDefault())}),onKeyDown:F(m.onKeyDown,u=>{const g=x.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&N(u.key),!(g&&u.key===" ")&&Yt.includes(u.key)&&(h(),u.preventDefault())})})})});Ps.displayName=Ts;var Rs="SelectValue",Es=o.forwardRef((n,a)=>{const{__scopeSelect:s,className:l,style:m,children:i,placeholder:c="",...r}=n,d=ve(Rs,s),{onValueNodeHasChildrenChange:t}=d,f=i!==void 0,x=me(a,d.onValueNodeChange);return je(()=>{t(f)},[t,f]),e.jsx(J.span,{...r,ref:x,style:{pointerEvents:"none"},children:Ys(d.value)?e.jsx(e.Fragment,{children:c}):i})});Es.displayName=Rs;var sa="SelectIcon",As=o.forwardRef((n,a)=>{const{__scopeSelect:s,children:l,...m}=n;return e.jsx(J.span,{"aria-hidden":!0,...m,ref:a,children:l||"▼"})});As.displayName=sa;var ta="SelectPortal",Is=n=>e.jsx(Rt,{asChild:!0,...n});Is.displayName=ta;var we="SelectContent",Ms=o.forwardRef((n,a)=>{const s=ve(we,n.__scopeSelect),[l,m]=o.useState();if(je(()=>{m(new DocumentFragment)},[]),!s.open){const i=l;return i?vs.createPortal(e.jsx(ks,{scope:n.__scopeSelect,children:e.jsx(qe.Slot,{scope:n.__scopeSelect,children:e.jsx("div",{children:n.children})})}),i):null}return e.jsx(Ds,{...n,ref:a})});Ms.displayName=we;var ae=10,[ks,ge]=De(we),aa="SelectContentImpl",Ds=o.forwardRef((n,a)=>{const{__scopeSelect:s,position:l="item-aligned",onCloseAutoFocus:m,onEscapeKeyDown:i,onPointerDownOutside:c,side:r,sideOffset:d,align:t,alignOffset:f,arrowPadding:x,collisionBoundary:N,collisionPadding:w,sticky:h,hideWhenDetached:u,avoidCollisions:g,...S}=n,j=ve(we,s),[p,_]=o.useState(null),[H,ne]=o.useState(null),D=me(a,v=>_(v)),[W,ee]=o.useState(null),[re,G]=o.useState(null),Y=$e(s),[se,Q]=o.useState(!1),X=o.useRef(!1);o.useEffect(()=>{if(p)return pt(p)},[p]),jt();const O=o.useCallback(v=>{const[R,...K]=Y().map(T=>T.ref.current),[P]=K.slice(-1),C=document.activeElement;for(const T of v)if(T===C||(T==null||T.scrollIntoView({block:"nearest"}),T===R&&H&&(H.scrollTop=0),T===P&&H&&(H.scrollTop=H.scrollHeight),T==null||T.focus(),document.activeElement!==C))return},[Y,H]),z=o.useCallback(()=>O([W,p]),[O,W,p]);o.useEffect(()=>{se&&z()},[se,z]);const{onOpenChange:Z,triggerPointerDownPosRef:te}=j;o.useEffect(()=>{if(p){let v={x:0,y:0};const R=P=>{var C,T;v={x:Math.abs(Math.round(P.pageX)-(((C=te.current)==null?void 0:C.x)??0)),y:Math.abs(Math.round(P.pageY)-(((T=te.current)==null?void 0:T.y)??0))}},K=P=>{v.x<=10&&v.y<=10?P.preventDefault():p.contains(P.target)||Z(!1),document.removeEventListener("pointermove",R),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",R),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",K,{capture:!0})}}},[p,Z,te]),o.useEffect(()=>{const v=()=>Z(!1);return window.addEventListener("blur",v),window.addEventListener("resize",v),()=>{window.removeEventListener("blur",v),window.removeEventListener("resize",v)}},[Z]);const[Se,Ne]=Xs(v=>{const R=Y().filter(C=>!C.disabled),K=R.find(C=>C.ref.current===document.activeElement),P=Zs(R,v,K);P&&setTimeout(()=>P.ref.current.focus())}),Ce=o.useCallback((v,R,K)=>{const P=!X.current&&!K;(j.value!==void 0&&j.value===R||P)&&(ee(v),P&&(X.current=!0))},[j.value]),Te=o.useCallback(()=>p==null?void 0:p.focus(),[p]),he=o.useCallback((v,R,K)=>{const P=!X.current&&!K;(j.value!==void 0&&j.value===R||P)&&G(v)},[j.value]),ye=l==="popper"?Ye:Ls,ue=ye===Ye?{side:r,sideOffset:d,align:t,alignOffset:f,arrowPadding:x,collisionBoundary:N,collisionPadding:w,sticky:h,hideWhenDetached:u,avoidCollisions:g}:{};return e.jsx(ks,{scope:s,content:p,viewport:H,onViewportChange:ne,itemRefCallback:Ce,selectedItem:W,onItemLeave:Te,itemTextRefCallback:he,focusSelectedItem:z,selectedItemText:re,position:l,isPositioned:se,searchRef:Se,children:e.jsx(ft,{as:vt,allowPinchZoom:!0,children:e.jsx(gt,{asChild:!0,trapped:j.open,onMountAutoFocus:v=>{v.preventDefault()},onUnmountAutoFocus:F(m,v=>{var R;(R=j.trigger)==null||R.focus({preventScroll:!0}),v.preventDefault()}),children:e.jsx(Nt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:v=>v.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:e.jsx(ye,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:v=>v.preventDefault(),...S,...ue,onPlaced:()=>Q(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:F(S.onKeyDown,v=>{const R=v.ctrlKey||v.altKey||v.metaKey;if(v.key==="Tab"&&v.preventDefault(),!R&&v.key.length===1&&Ne(v.key),["ArrowUp","ArrowDown","Home","End"].includes(v.key)){let P=Y().filter(C=>!C.disabled).map(C=>C.ref.current);if(["ArrowUp","End"].includes(v.key)&&(P=P.slice().reverse()),["ArrowUp","ArrowDown"].includes(v.key)){const C=v.target,T=P.indexOf(C);P=P.slice(T+1)}setTimeout(()=>O(P)),v.preventDefault()}})})})})})})});Ds.displayName=aa;var na="SelectItemAlignedPosition",Ls=o.forwardRef((n,a)=>{const{__scopeSelect:s,onPlaced:l,...m}=n,i=ve(we,s),c=ge(we,s),[r,d]=o.useState(null),[t,f]=o.useState(null),x=me(a,D=>f(D)),N=$e(s),w=o.useRef(!1),h=o.useRef(!0),{viewport:u,selectedItem:g,selectedItemText:S,focusSelectedItem:j}=c,p=o.useCallback(()=>{if(i.trigger&&i.valueNode&&r&&t&&u&&g&&S){const D=i.trigger.getBoundingClientRect(),W=t.getBoundingClientRect(),ee=i.valueNode.getBoundingClientRect(),re=S.getBoundingClientRect();if(i.dir!=="rtl"){const C=re.left-W.left,T=ee.left-C,le=D.left-T,ie=D.width+le,L=Math.max(ie,W.width),Le=window.innerWidth-ae,We=cs(T,[ae,Math.max(ae,Le-L)]);r.style.minWidth=ie+"px",r.style.left=We+"px"}else{const C=W.right-re.right,T=window.innerWidth-ee.right-C,le=window.innerWidth-D.right-T,ie=D.width+le,L=Math.max(ie,W.width),Le=window.innerWidth-ae,We=cs(T,[ae,Math.max(ae,Le-L)]);r.style.minWidth=ie+"px",r.style.right=We+"px"}const G=N(),Y=window.innerHeight-ae*2,se=u.scrollHeight,Q=window.getComputedStyle(t),X=parseInt(Q.borderTopWidth,10),O=parseInt(Q.paddingTop,10),z=parseInt(Q.borderBottomWidth,10),Z=parseInt(Q.paddingBottom,10),te=X+O+se+Z+z,Se=Math.min(g.offsetHeight*5,te),Ne=window.getComputedStyle(u),Ce=parseInt(Ne.paddingTop,10),Te=parseInt(Ne.paddingBottom,10),he=D.top+D.height/2-ae,ye=Y-he,ue=g.offsetHeight/2,v=g.offsetTop+ue,R=X+O+v,K=te-R;if(R<=he){const C=G.length>0&&g===G[G.length-1].ref.current;r.style.bottom="0px";const T=t.clientHeight-u.offsetTop-u.offsetHeight,le=Math.max(ye,ue+(C?Te:0)+T+z),ie=R+le;r.style.height=ie+"px"}else{const C=G.length>0&&g===G[0].ref.current;r.style.top="0px";const le=Math.max(he,X+u.offsetTop+(C?Ce:0)+ue)+K;r.style.height=le+"px",u.scrollTop=R-he+u.offsetTop}r.style.margin=`${ae}px 0`,r.style.minHeight=Se+"px",r.style.maxHeight=Y+"px",l==null||l(),requestAnimationFrame(()=>w.current=!0)}},[N,i.trigger,i.valueNode,r,t,u,g,S,i.dir,l]);je(()=>p(),[p]);const[_,H]=o.useState();je(()=>{t&&H(window.getComputedStyle(t).zIndex)},[t]);const ne=o.useCallback(D=>{D&&h.current===!0&&(p(),j==null||j(),h.current=!1)},[p,j]);return e.jsx(la,{scope:s,contentWrapper:r,shouldExpandOnScrollRef:w,onScrollButtonChange:ne,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:e.jsx(J.div,{...m,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...m.style}})})})});Ls.displayName=na;var ra="SelectPopperPosition",Ye=o.forwardRef((n,a)=>{const{__scopeSelect:s,align:l="start",collisionPadding:m=ae,...i}=n,c=Ue(s);return e.jsx(yt,{...c,...i,ref:a,align:l,collisionPadding:m,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ye.displayName=ra;var[la,ls]=De(we,{}),Qe="SelectViewport",_s=o.forwardRef((n,a)=>{const{__scopeSelect:s,nonce:l,...m}=n,i=ge(Qe,s),c=ls(Qe,s),r=me(a,i.onViewportChange),d=o.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(qe.Slot,{scope:s,children:e.jsx(J.div,{"data-radix-select-viewport":"",role:"presentation",...m,ref:r,style:{position:"relative",flex:1,overflow:"hidden auto",...m.style},onScroll:F(m.onScroll,t=>{const f=t.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:N}=c;if(N!=null&&N.current&&x){const w=Math.abs(d.current-f.scrollTop);if(w>0){const h=window.innerHeight-ae*2,u=parseFloat(x.style.minHeight),g=parseFloat(x.style.height),S=Math.max(u,g);if(S<h){const j=S+w,p=Math.min(h,j),_=j-p;x.style.height=p+"px",x.style.bottom==="0px"&&(f.scrollTop=_>0?_:0,x.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});_s.displayName=Qe;var Os="SelectGroup",[ia,ca]=De(Os),oa=o.forwardRef((n,a)=>{const{__scopeSelect:s,...l}=n,m=es();return e.jsx(ia,{scope:s,id:m,children:e.jsx(J.div,{role:"group","aria-labelledby":m,...l,ref:a})})});oa.displayName=Os;var Fs="SelectLabel",Bs=o.forwardRef((n,a)=>{const{__scopeSelect:s,...l}=n,m=ca(Fs,s);return e.jsx(J.div,{id:m.id,...l,ref:a})});Bs.displayName=Fs;var Ve="SelectItem",[da,Hs]=De(Ve),Ks=o.forwardRef((n,a)=>{const{__scopeSelect:s,value:l,disabled:m=!1,textValue:i,...c}=n,r=ve(Ve,s),d=ge(Ve,s),t=r.value===l,[f,x]=o.useState(i??""),[N,w]=o.useState(!1),h=me(a,j=>{var p;return(p=d.itemRefCallback)==null?void 0:p.call(d,j,l,m)}),u=es(),g=o.useRef("touch"),S=()=>{m||(r.onValueChange(l),r.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(da,{scope:s,value:l,disabled:m,textId:u,isSelected:t,onItemTextChange:o.useCallback(j=>{x(p=>p||((j==null?void 0:j.textContent)??"").trim())},[]),children:e.jsx(qe.ItemSlot,{scope:s,value:l,disabled:m,textValue:f,children:e.jsx(J.div,{role:"option","aria-labelledby":u,"data-highlighted":N?"":void 0,"aria-selected":t&&N,"data-state":t?"checked":"unchecked","aria-disabled":m||void 0,"data-disabled":m?"":void 0,tabIndex:m?void 0:-1,...c,ref:h,onFocus:F(c.onFocus,()=>w(!0)),onBlur:F(c.onBlur,()=>w(!1)),onClick:F(c.onClick,()=>{g.current!=="mouse"&&S()}),onPointerUp:F(c.onPointerUp,()=>{g.current==="mouse"&&S()}),onPointerDown:F(c.onPointerDown,j=>{g.current=j.pointerType}),onPointerMove:F(c.onPointerMove,j=>{var p;g.current=j.pointerType,m?(p=d.onItemLeave)==null||p.call(d):g.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:F(c.onPointerLeave,j=>{var p;j.currentTarget===document.activeElement&&((p=d.onItemLeave)==null||p.call(d))}),onKeyDown:F(c.onKeyDown,j=>{var _;((_=d.searchRef)==null?void 0:_.current)!==""&&j.key===" "||(Qt.includes(j.key)&&S(),j.key===" "&&j.preventDefault())})})})})});Ks.displayName=Ve;var _e="SelectItemText",Vs=o.forwardRef((n,a)=>{const{__scopeSelect:s,className:l,style:m,...i}=n,c=ve(_e,s),r=ge(_e,s),d=Hs(_e,s),t=ea(_e,s),[f,x]=o.useState(null),N=me(a,S=>x(S),d.onItemTextChange,S=>{var j;return(j=r.itemTextRefCallback)==null?void 0:j.call(r,S,d.value,d.disabled)}),w=f==null?void 0:f.textContent,h=o.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:w},d.value),[d.disabled,d.value,w]),{onNativeOptionAdd:u,onNativeOptionRemove:g}=t;return je(()=>(u(h),()=>g(h)),[u,g,h]),e.jsxs(e.Fragment,{children:[e.jsx(J.span,{id:d.textId,...i,ref:N}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?vs.createPortal(i.children,c.valueNode):null]})});Vs.displayName=_e;var qs="SelectItemIndicator",$s=o.forwardRef((n,a)=>{const{__scopeSelect:s,...l}=n;return Hs(qs,s).isSelected?e.jsx(J.span,{"aria-hidden":!0,...l,ref:a}):null});$s.displayName=qs;var Xe="SelectScrollUpButton",Us=o.forwardRef((n,a)=>{const s=ge(Xe,n.__scopeSelect),l=ls(Xe,n.__scopeSelect),[m,i]=o.useState(!1),c=me(a,l.onScrollButtonChange);return je(()=>{if(s.viewport&&s.isPositioned){let r=function(){const t=d.scrollTop>0;i(t)};const d=s.viewport;return r(),d.addEventListener("scroll",r),()=>d.removeEventListener("scroll",r)}},[s.viewport,s.isPositioned]),m?e.jsx(zs,{...n,ref:c,onAutoScroll:()=>{const{viewport:r,selectedItem:d}=s;r&&d&&(r.scrollTop=r.scrollTop-d.offsetHeight)}}):null});Us.displayName=Xe;var Ze="SelectScrollDownButton",Ws=o.forwardRef((n,a)=>{const s=ge(Ze,n.__scopeSelect),l=ls(Ze,n.__scopeSelect),[m,i]=o.useState(!1),c=me(a,l.onScrollButtonChange);return je(()=>{if(s.viewport&&s.isPositioned){let r=function(){const t=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<t;i(f)};const d=s.viewport;return r(),d.addEventListener("scroll",r),()=>d.removeEventListener("scroll",r)}},[s.viewport,s.isPositioned]),m?e.jsx(zs,{...n,ref:c,onAutoScroll:()=>{const{viewport:r,selectedItem:d}=s;r&&d&&(r.scrollTop=r.scrollTop+d.offsetHeight)}}):null});Ws.displayName=Ze;var zs=o.forwardRef((n,a)=>{const{__scopeSelect:s,onAutoScroll:l,...m}=n,i=ge("SelectScrollButton",s),c=o.useRef(null),r=$e(s),d=o.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return o.useEffect(()=>()=>d(),[d]),je(()=>{var f;const t=r().find(x=>x.ref.current===document.activeElement);(f=t==null?void 0:t.ref.current)==null||f.scrollIntoView({block:"nearest"})},[r]),e.jsx(J.div,{"aria-hidden":!0,...m,ref:a,style:{flexShrink:0,...m.style},onPointerDown:F(m.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(l,50))}),onPointerMove:F(m.onPointerMove,()=>{var t;(t=i.onItemLeave)==null||t.call(i),c.current===null&&(c.current=window.setInterval(l,50))}),onPointerLeave:F(m.onPointerLeave,()=>{d()})})}),xa="SelectSeparator",Gs=o.forwardRef((n,a)=>{const{__scopeSelect:s,...l}=n;return e.jsx(J.div,{"aria-hidden":!0,...l,ref:a})});Gs.displayName=xa;var Je="SelectArrow",ma=o.forwardRef((n,a)=>{const{__scopeSelect:s,...l}=n,m=Ue(s),i=ve(Je,s),c=ge(Je,s);return i.open&&c.position==="popper"?e.jsx(wt,{...m,...l,ref:a}):null});ma.displayName=Je;function Ys(n){return n===""||n===void 0}var Qs=o.forwardRef((n,a)=>{const{value:s,...l}=n,m=o.useRef(null),i=me(a,m),c=bt(s);return o.useEffect(()=>{const r=m.current,d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==s&&f){const x=new Event("change",{bubbles:!0});f.call(r,s),r.dispatchEvent(x)}},[c,s]),e.jsx(St,{asChild:!0,children:e.jsx("select",{...l,ref:i,defaultValue:s})})});Qs.displayName="BubbleSelect";function Xs(n){const a=Ct(n),s=o.useRef(""),l=o.useRef(0),m=o.useCallback(c=>{const r=s.current+c;a(r),function d(t){s.current=t,window.clearTimeout(l.current),t!==""&&(l.current=window.setTimeout(()=>d(""),1e3))}(r)},[a]),i=o.useCallback(()=>{s.current="",window.clearTimeout(l.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(l.current),[]),[s,m,i]}function Zs(n,a,s){const m=a.length>1&&Array.from(a).every(t=>t===a[0])?a[0]:a,i=s?n.indexOf(s):-1;let c=ha(n,Math.max(i,0));m.length===1&&(c=c.filter(t=>t!==s));const d=c.find(t=>t.textValue.toLowerCase().startsWith(m.toLowerCase()));return d!==s?d:void 0}function ha(n,a){return n.map((s,l)=>n[(a+l)%n.length])}var ua=Cs,Js=Ps,pa=Es,ja=As,fa=Is,et=Ms,va=_s,st=Bs,tt=Ks,ga=Vs,Na=$s,at=Us,nt=Ws,rt=Gs;const Oe=ua,Fe=pa,Pe=o.forwardRef(({className:n,children:a,...s},l)=>e.jsxs(Js,{ref:l,className:B("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...s,children:[a,e.jsx(ja,{asChild:!0,children:e.jsx(gs,{className:"h-4 w-4 opacity-50"})})]}));Pe.displayName=Js.displayName;const lt=o.forwardRef(({className:n,...a},s)=>e.jsx(at,{ref:s,className:B("flex cursor-default items-center justify-center py-1",n),...a,children:e.jsx(Et,{className:"h-4 w-4"})}));lt.displayName=at.displayName;const it=o.forwardRef(({className:n,...a},s)=>e.jsx(nt,{ref:s,className:B("flex cursor-default items-center justify-center py-1",n),...a,children:e.jsx(gs,{className:"h-4 w-4"})}));it.displayName=nt.displayName;const Re=o.forwardRef(({className:n,children:a,position:s="popper",...l},m)=>e.jsx(fa,{children:e.jsxs(et,{ref:m,className:B("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:s,...l,children:[e.jsx(lt,{}),e.jsx(va,{className:B("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(it,{})]})}));Re.displayName=et.displayName;const ya=o.forwardRef(({className:n,...a},s)=>e.jsx(st,{ref:s,className:B("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...a}));ya.displayName=st.displayName;const U=o.forwardRef(({className:n,children:a,...s},l)=>e.jsxs(tt,{ref:l,className:B("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Na,{children:e.jsx(At,{className:"h-4 w-4"})})}),e.jsx(ga,{children:a})]}));U.displayName=tt.displayName;const wa=o.forwardRef(({className:n,...a},s)=>e.jsx(rt,{ref:s,className:B("-mx-1 my-1 h-px bg-muted",n),...a}));wa.displayName=rt.displayName;const ct=o.forwardRef(({className:n,...a},s)=>e.jsx("textarea",{className:B("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...a}));ct.displayName="Textarea";function ba(){const{toast:n}=be(),[a,s]=o.useState("send"),[l,m]=o.useState(""),[i,c]=o.useState(""),[r,d]=o.useState(""),[t,f]=o.useState("info"),[x,N]=o.useState(!1),[w,h]=o.useState(!1),{data:u}=de({queryKey:["/api/admin/users"],retry:1}),g=Ee({mutationFn:async({userId:p,title:_,message:H,type:ne})=>{const D=await Ae("POST","/api/telegram/notification",{userId:parseInt(p),title:_,message:H,type:ne});if(D)return await D.json();throw new Error("Не удалось отправить уведомление")},onSuccess:()=>{n({title:"Успешно",description:"Уведомление отправлено"}),m(""),c("")},onError:p=>{n({title:"Ошибка",description:`Не удалось отправить уведомление: ${p.message}`,variant:"destructive"})},onSettled:()=>{h(!1)}}),S=Ee({mutationFn:async({message:p})=>{const _=await Ae("POST","/api/telegram/broadcast",{message:p});if(_)return await _.json();throw new Error("Не удалось отправить массовое уведомление")},onSuccess:p=>{n({title:"Успешно",description:`Массовое уведомление отправлено ${p.count} пользователям`}),m("")},onError:p=>{n({title:"Ошибка",description:`Не удалось отправить массовое уведомление: ${p.message}`,variant:"destructive"})},onSettled:()=>{h(!1)}}),j=p=>{if(p.preventDefault(),x){if(!l){n({title:"Ошибка",description:"Введите текст сообщения",variant:"destructive"});return}h(!0),S.mutate({message:l})}else{if(!r||!l){n({title:"Ошибка",description:"Выберите пользователя и введите текст сообщения",variant:"destructive"});return}h(!0),g.mutate({userId:r,title:i||"Уведомление",message:l,type:t})}};return e.jsx("div",{className:"space-y-4",children:e.jsxs(Ns,{value:a,onValueChange:s,children:[e.jsxs(ys,{className:"grid grid-cols-2 w-[400px]",children:[e.jsxs(ce,{value:"send",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Отправка уведомлений"]}),e.jsxs(ce,{value:"setup",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Настройка бота"]})]}),e.jsxs(oe,{value:"send",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dt,{id:"broadcast",checked:x,onCheckedChange:N}),e.jsx("label",{htmlFor:"broadcast",className:"text-sm font-medium",children:"Массовая рассылка всем пользователям"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[!x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"user-id",className:"text-sm font-medium",children:"Получатель"}),e.jsxs(Oe,{value:r,onValueChange:d,children:[e.jsx(Pe,{id:"user-id",children:e.jsx(Fe,{placeholder:"Выберите пользователя"})}),e.jsx(Re,{children:u==null?void 0:u.map(p=>e.jsxs(U,{value:p.id.toString(),children:[p.username," ",p.email?`(${p.email})`:""]},p.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"notification-title",className:"text-sm font-medium",children:"Заголовок уведомления"}),e.jsx(pe,{id:"notification-title",placeholder:"Введите заголовок",value:i,onChange:p=>c(p.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"notification-type",className:"text-sm font-medium",children:"Тип уведомления"}),e.jsxs(Oe,{value:t,onValueChange:p=>f(p),children:[e.jsx(Pe,{id:"notification-type",children:e.jsx(Fe,{placeholder:"Выберите тип уведомления"})}),e.jsxs(Re,{children:[e.jsx(U,{value:"info",children:"Информация"}),e.jsx(U,{value:"success",children:"Успех"}),e.jsx(U,{value:"warning",children:"Предупреждение"}),e.jsx(U,{value:"error",children:"Ошибка"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"message",className:"text-sm font-medium",children:x?"Текст сообщения для всех пользователей":"Текст сообщения"}),e.jsx(ct,{id:"message",placeholder:"Введите текст сообщения",value:l,onChange:p=>m(p.target.value),rows:5})]}),e.jsx(xe,{type:"submit",disabled:w,className:"w-full",children:w?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),"Отправка..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"mr-2 h-4 w-4"}),x?"Отправить всем":"Отправить уведомление"]})})]})]}),e.jsx(oe,{value:"setup",className:"space-y-4 mt-4",children:e.jsx(ot,{})})]})})}function ot(){const{toast:n}=be(),[a,s]=o.useState(!1),[l,m]=o.useState(""),[i,c]=o.useState(""),[r,d]=o.useState(!1),{data:t}=de({queryKey:["/api/telegram/status"],staleTime:6e4}),f=Ee({mutationFn:async N=>{const w=await Ae("POST","/api/telegram/connect",N);if(w)return await w.json();throw new Error("Не удалось выполнить запрос")},onSuccess:()=>{n({title:"Успешно",description:"Telegram бот успешно подключен"}),Be.invalidateQueries({queryKey:["/api/telegram/status"]}),Be.invalidateQueries({queryKey:["/api/system/info"]})},onError:N=>{n({title:"Ошибка",description:`Не удалось подключить Telegram бота: ${N.message}`,variant:"destructive"})},onSettled:()=>{s(!1)}}),x=N=>{if(N.preventDefault(),!l){n({title:"Ошибка",description:"Введите токен бота",variant:"destructive"});return}s(!0),f.mutate({botToken:l,adminPassword:i||void 0})};return e.jsxs("div",{className:"space-y-4 py-2",children:[t!=null&&t.isConnected?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-5 w-5 text-green-500"}),e.jsx("p",{className:"text-sm",children:"Бот уже подключен и работает"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Подключен: ",t.connectedAt?new Date(t.connectedAt).toLocaleString():"неизвестно"]}),e.jsx("p",{className:"text-sm",children:"Вы хотите обновить настройки бота?"})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Бот еще не настроен. Создайте бота через @BotFather в Telegram и введите полученный токен."}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"bot-token",className:"text-sm font-medium",children:"Токен бота"}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{id:"bot-token",type:r?"text":"password",placeholder:"Введите токен бота",value:l,onChange:N=>m(N.target.value),className:"pr-10",required:!0}),e.jsx(xe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2",onClick:()=>d(!r),children:r?e.jsx(Lt,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(_t,{className:"h-4 w-4 text-muted-foreground"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"admin-password",className:"text-sm font-medium",children:"Пароль администратора (необязательно)"}),e.jsx(pe,{id:"admin-password",type:"password",placeholder:"Пароль для авторизации в боте",value:i,onChange:N=>c(N.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Этот пароль будет запрашиваться для доступа к админ-функциям в Telegram боте"})]}),e.jsx(Ss,{children:e.jsx(xe,{type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),"Подключение..."]}):t!=null&&t.isConnected?"Обновить настройки":"Подключить бота"})})]})]})}function Sa(){const{toast:n}=be(),[a,s]=o.useState("");o.useState(null);const[l,m]=o.useState(!1),[i,c]=o.useState(null),{data:r,isLoading:d}=de({queryKey:["/api/admin/users"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка",description:"Не удалось загрузить пользователей",variant:"destructive"})}}}),t=Ee({mutationFn:async h=>await(await Ae("PATCH",`/api/admin/users/${h.id}`,h)).json(),onSuccess:()=>{n({title:"Успешно",description:"Пользователь обновлен"}),Be.invalidateQueries({queryKey:["/api/admin/users"]}),m(!1)},onError:h=>{n({title:"Ошибка",description:`Не удалось обновить пользователя: ${h.message}`,variant:"destructive"})}}),f=Ee({mutationFn:async h=>await(await Ae("POST",`/api/admin/users/${h}/toggle-ban`)).json(),onSuccess:()=>{n({title:"Успешно",description:"Статус блокировки пользователя изменен"}),Be.invalidateQueries({queryKey:["/api/admin/users"]})},onError:h=>{n({title:"Ошибка",description:`Не удалось изменить статус блокировки: ${h.message}`,variant:"destructive"})}}),x=h=>{c({...h}),m(!0)},N=h=>{h.preventDefault(),i&&t.mutate(i)},w=r==null?void 0:r.filter(h=>h.username.toLowerCase().includes(a.toLowerCase())||h.email&&h.email.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 items-center mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ke,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"Поиск пользователей...",value:a,onChange:h=>s(h.target.value),className:"pl-8"})]})}),d?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx("div",{className:"border rounded-md",children:e.jsxs(Ie,{children:[e.jsx(Me,{children:e.jsxs($,{children:[e.jsx(b,{children:"ID"}),e.jsx(b,{children:"Имя пользователя"}),e.jsx(b,{children:"Email"}),e.jsx(b,{children:"Роль"}),e.jsx(b,{children:"Подписка"}),e.jsx(b,{children:"Статус"}),e.jsx(b,{children:"Действия"})]})}),e.jsx(ke,{children:w&&w.length>0?w.map(h=>e.jsxs($,{children:[e.jsx(y,{children:h.id}),e.jsx(y,{children:h.username}),e.jsx(y,{children:h.email||"—"}),e.jsx(y,{children:e.jsx(q,{variant:h.role==="superadmin"?"destructive":h.role==="admin"?"default":"outline",children:h.role==="superadmin"?"Суперадмин":h.role==="admin"?"Админ":h.role==="host"?"Хост":"Пользователь"})}),e.jsx(y,{children:e.jsx(q,{variant:h.subscription==="pro"?"default":"outline",children:h.subscription==="pro"?"Pro":"Free"})}),e.jsx(y,{children:e.jsx(q,{variant:h.isBanned?"destructive":"default",children:h.isBanned?"Заблокирован":"Активен"})}),e.jsx(y,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>x(h),children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>f.mutate(h.id),disabled:f.isPending,children:h.banned?e.jsx(bs,{className:"h-4 w-4"}):e.jsx(Kt,{className:"h-4 w-4"})})]})})]},h.id)):e.jsx($,{children:e.jsx(y,{colSpan:7,className:"text-center",children:a?"Пользователи не найдены":"Нет данных о пользователях"})})})]})}),e.jsx(ss,{open:l,onOpenChange:m,children:e.jsxs(ts,{className:"sm:max-w-[425px]",children:[e.jsxs(as,{children:[e.jsx(ns,{children:"Редактирование пользователя"}),e.jsxs(rs,{children:["Редактирование данных пользователя ",i==null?void 0:i.username]})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"username",className:"text-right text-sm",children:"Имя пользователя"}),e.jsx(pe,{id:"username",value:(i==null?void 0:i.username)||"",onChange:h=>c(u=>u?{...u,username:h.target.value}:null),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"email",className:"text-right text-sm",children:"Email"}),e.jsx(pe,{id:"email",value:(i==null?void 0:i.email)||"",onChange:h=>c(u=>u?{...u,email:h.target.value}:null),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"role",className:"text-right text-sm",children:"Роль"}),e.jsxs(Oe,{value:(i==null?void 0:i.role)||"user",onValueChange:h=>c(u=>u?{...u,role:h}:null),children:[e.jsx(Pe,{className:"col-span-3",children:e.jsx(Fe,{placeholder:"Выберите роль"})}),e.jsxs(Re,{children:[e.jsx(U,{value:"user",children:"Пользователь"}),e.jsx(U,{value:"host",children:"Хост"}),e.jsx(U,{value:"admin",children:"Администратор"}),e.jsx(U,{value:"superadmin",children:"Суперадминистратор"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"subscription",className:"text-right text-sm",children:"Подписка"}),e.jsxs(Oe,{value:(i==null?void 0:i.subscription)||"free",onValueChange:h=>c(u=>u?{...u,subscription:h}:null),children:[e.jsx(Pe,{className:"col-span-3",children:e.jsx(Fe,{placeholder:"Выберите тип подписки"})}),e.jsxs(Re,{children:[e.jsx(U,{value:"free",children:"Free"}),e.jsx(U,{value:"pro",children:"Pro"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"banned",className:"text-right text-sm",children:"Статус"}),e.jsxs(Oe,{value:i!=null&&i.banned?"banned":"active",onValueChange:h=>c(u=>u?{...u,banned:h==="banned"}:null),children:[e.jsx(Pe,{className:"col-span-3",children:e.jsx(Fe,{placeholder:"Выберите статус"})}),e.jsxs(Re,{children:[e.jsx(U,{value:"active",children:"Активен"}),e.jsx(U,{value:"banned",children:"Заблокирован"})]})]})]})]}),e.jsx(Ss,{children:e.jsxs(xe,{type:"submit",disabled:t.isPending,children:[t.isPending&&e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),"Сохранить"]})})]})]})})]})}function Ca(){const{toast:n}=be(),{data:a,isLoading:s}=de({queryKey:["/api/admin/payment-stats"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка",description:"Не удалось загрузить статистику платежей",variant:"destructive"})}}}),l=a!=null&&a.revenueByMonth?Object.entries(a.revenueByMonth).map(([i,c])=>({name:i,value:c/100})).sort((i,c)=>{const[r,d]=i.name.split("-").map(Number),[t,f]=c.name.split("-").map(Number);return r!==t?r-t:d-f}):[],m=a!=null&&a.subscriptionsByType?Object.entries(a.subscriptionsByType).map(([i,c])=>({name:i==="1"?"1 месяц":i==="2"?"2 месяца":"5 месяцев",value:c})):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(E,{children:[e.jsxs(A,{className:"pb-2",children:[e.jsx(I,{className:"text-lg",children:"Общий доход"}),e.jsx(V,{children:"За все время"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-3xl font-bold",children:s?e.jsx(k,{className:"h-6 w-6 animate-spin"}):`${(((a==null?void 0:a.totalAmount)||0)/100).toFixed(0)} ₽`}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Всего платежей: ",(a==null?void 0:a.totalPayments)||0]})]})]}),e.jsxs(E,{children:[e.jsxs(A,{className:"pb-2",children:[e.jsx(I,{className:"text-lg",children:"Средний платеж"}),e.jsx(V,{children:"Средняя стоимость подписки"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-3xl font-bold",children:s?e.jsx(k,{className:"h-6 w-6 animate-spin"}):`${(((a==null?void 0:a.averagePaymentAmount)||0)/100).toFixed(0)} ₽`}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"На одного пользователя"})]})]}),e.jsxs(E,{children:[e.jsxs(A,{className:"pb-2",children:[e.jsx(I,{className:"text-lg",children:"Конверсия"}),e.jsx(V,{children:"Процент платящих пользователей"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-3xl font-bold",children:s?e.jsx(k,{className:"h-6 w-6 animate-spin"}):`${((a==null?void 0:a.conversionRate)||0).toFixed(1)}%`}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"От общего числа пользователей"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{className:"col-span-1",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Доход по месяцам"}),e.jsx(V,{children:"Динамика дохода по месяцам"})]}),e.jsx(M,{children:s?e.jsx("div",{className:"flex justify-center items-center h-[300px]",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):l.length>0?e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(ms,{width:"100%",height:"100%",children:e.jsxs(Ot,{data:l,children:[e.jsx(hs,{strokeDasharray:"3 3"}),e.jsx(ze,{dataKey:"name"}),e.jsx(Ge,{}),e.jsx(us,{formatter:i=>[`${i} ₽`,"Доход"]}),e.jsx(Ft,{type:"monotone",dataKey:"value",name:"Доход",stroke:"var(--primary)",fill:"var(--primary)",fillOpacity:.2})]})})}):e.jsx("div",{className:"flex justify-center items-center h-[300px] text-muted-foreground",children:"Нет данных для отображения"})})]}),e.jsxs(E,{className:"col-span-1",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Распределение подписок"}),e.jsx(V,{children:"По типам подписок"})]}),e.jsx(M,{children:s?e.jsx("div",{className:"flex justify-center items-center h-[300px]",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):m.length>0?e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(ms,{width:"100%",height:"100%",children:e.jsxs(Wt,{data:m,children:[e.jsx(hs,{strokeDasharray:"3 3"}),e.jsx(ze,{dataKey:"name"}),e.jsx(Ge,{}),e.jsx(us,{formatter:i=>[i,"Количество"]}),e.jsx(js,{dataKey:"value",name:"Количество",fill:"var(--primary)",radius:[4,4,0,0]})]})})}):e.jsx("div",{className:"flex justify-center items-center h-[300px] text-muted-foreground",children:"Нет данных для отображения"})})]})]}),e.jsxs(E,{children:[e.jsxs(A,{children:[e.jsx(I,{children:"Последние платежи"}),e.jsx(V,{children:"Недавние транзакции в системе"})]}),e.jsx(M,{children:s?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):a!=null&&a.latestPayments&&a.latestPayments.length>0?e.jsx("div",{className:"border rounded-md",children:e.jsxs(Ie,{children:[e.jsx(Me,{children:e.jsxs($,{children:[e.jsx(b,{children:"ID"}),e.jsx(b,{children:"Пользователь"}),e.jsx(b,{children:"Сумма"}),e.jsx(b,{children:"Тип"}),e.jsx(b,{children:"Статус"}),e.jsx(b,{children:"Дата"})]})}),e.jsx(ke,{children:a.latestPayments.map(i=>e.jsxs($,{children:[e.jsx(y,{children:i.id}),e.jsx(y,{children:i.username}),e.jsxs(y,{children:[(i.amount/100).toFixed(0)," ₽"]}),e.jsx(y,{children:e.jsx(q,{variant:"outline",children:i.type==="subscription"?"Подписка":i.type==="renewal"?"Продление":"Покупка"})}),e.jsx(y,{children:e.jsx(q,{variant:i.status==="succeeded"?"success":i.status==="pending"?"warning":"destructive",children:i.status==="succeeded"?"Выполнен":i.status==="pending"?"В обработке":"Ошибка"})}),e.jsx(y,{children:new Date(i.createdAt).toLocaleString()})]},i.id))})]})}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Нет данных о платежах"})})]})]})}function Ta(){const{toast:n}=be(),[a,s]=o.useState("");o.useState({});const{data:l,isLoading:m}=de({queryKey:["/api/admin/payments"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка",description:"Не удалось загрузить платежи",variant:"destructive"})}}}),i=l==null?void 0:l.filter(c=>{var d;return(d=c.username)==null?void 0:d.toLowerCase().includes(a.toLowerCase())});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 items-center mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ke,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"Поиск по пользователю...",value:a,onChange:c=>s(c.target.value),className:"pl-8"})]})}),m?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx("div",{className:"border rounded-md",children:e.jsxs(Ie,{children:[e.jsx(Me,{children:e.jsxs($,{children:[e.jsx(b,{children:"ID"}),e.jsx(b,{children:"Пользователь"}),e.jsx(b,{children:"Сумма"}),e.jsx(b,{children:"Тип"}),e.jsx(b,{children:"Метод"}),e.jsx(b,{children:"Статус"}),e.jsx(b,{children:"Дата"})]})}),e.jsx(ke,{children:i&&i.length>0?i.map(c=>e.jsxs($,{children:[e.jsx(y,{children:c.id}),e.jsx(y,{children:c.username}),e.jsxs(y,{children:[(c.amount/100).toFixed(0)," ₽"]}),e.jsx(y,{children:e.jsx(q,{variant:"outline",children:c.type==="subscription"?"Подписка":c.type==="renewal"?"Продление":"Покупка"})}),e.jsx(y,{children:c.paymentMethod==="yookassa"?"ЮKassa":c.paymentMethod==="stripe"?"Stripe":c.paymentMethod||"Неизвестно"}),e.jsx(y,{children:e.jsx(q,{variant:c.status==="succeeded"?"success":c.status==="pending"?"warning":"destructive",children:c.status==="succeeded"?"Выполнен":c.status==="pending"?"В обработке":c.status==="failed"?"Ошибка":c.status})}),e.jsx(y,{children:new Date(c.createdAt).toLocaleString()})]},c.id)):e.jsx($,{children:e.jsx(y,{colSpan:7,className:"text-center",children:a?"Платежи не найдены":"Нет данных о платежах"})})})]})})]})}function Pa(){const{toast:n}=be(),[a,s]=o.useState(""),[l,m]=o.useState(null),[i,c]=o.useState(!1),{data:r,isLoading:d}=de({queryKey:["/api/admin/conferences"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка",description:"Не удалось загрузить конференции",variant:"destructive"})}}}),t=Ee({mutationFn:async x=>await(await Ae("POST",`/api/admin/conferences/${x}/end`)).json(),onSuccess:()=>{n({title:"Успешно",description:"Конференция завершена"}),Be.invalidateQueries({queryKey:["/api/admin/conferences"]})},onError:x=>{n({title:"Ошибка",description:`Не удалось завершить конференцию: ${x.message}`,variant:"destructive"})}}),f=r==null?void 0:r.filter(x=>x.title.toLowerCase().includes(a.toLowerCase())||x.ownerName.toLowerCase().includes(a.toLowerCase()));return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 items-center mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ke,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(pe,{placeholder:"Поиск конференций...",value:a,onChange:x=>s(x.target.value),className:"pl-8"})]})}),d?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx("div",{className:"border rounded-md",children:e.jsxs(Ie,{children:[e.jsx(Me,{children:e.jsxs($,{children:[e.jsx(b,{children:"ID"}),e.jsx(b,{children:"Название"}),e.jsx(b,{children:"Владелец"}),e.jsx(b,{children:"Состояние"}),e.jsx(b,{children:"Создана"}),e.jsx(b,{children:"Участники"}),e.jsx(b,{children:"Действия"})]})}),e.jsx(ke,{children:f&&f.length>0?f.map(x=>e.jsxs($,{children:[e.jsxs(y,{children:[x.id.substring(0,8),"..."]}),e.jsx(y,{children:x.title}),e.jsx(y,{children:x.ownerName}),e.jsx(y,{children:e.jsx(q,{variant:x.active?"success":"outline",children:x.active?"Активна":"Завершена"})}),e.jsx(y,{children:new Date(x.createdAt).toLocaleDateString()}),e.jsx(y,{children:x.participants||0}),e.jsx(y,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>{m(x),c(!0)},children:e.jsx(Ke,{className:"h-4 w-4"})}),x.active&&e.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>t.mutate(x.id),disabled:t.isPending,children:e.jsx(Bt,{className:"h-4 w-4"})})]})})]},x.id)):e.jsx($,{children:e.jsx(y,{colSpan:7,className:"text-center",children:a?"Конференции не найдены":"Нет данных о конференциях"})})})]})}),e.jsx(ss,{open:i,onOpenChange:c,children:e.jsxs(ts,{className:"sm:max-w-[425px]",children:[e.jsxs(as,{children:[e.jsx(ns,{children:"Детали конференции"}),e.jsx(rs,{children:"Подробная информация о конференции"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:l==null?void 0:l.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Создана: ",l!=null&&l.createdAt?new Date(l.createdAt).toLocaleString():"Неизвестно"]})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Описание"}),e.jsx("p",{className:"text-sm",children:(l==null?void 0:l.description)||"Нет описания"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Функции"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(q,{variant:l!=null&&l.hasScreenShare?"default":"outline",children:"Демонстрация экрана"}),e.jsx(q,{variant:l!=null&&l.hasChat?"default":"outline",children:"Чат"}),e.jsx(q,{variant:l!=null&&l.hasVideoEnabled?"default":"outline",children:"Видео"})]})]}),(l==null?void 0:l.active)&&e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(xe,{variant:"destructive",size:"sm",onClick:()=>{t.mutate(l.id),c(!1)},disabled:t.isPending,children:[t.isPending&&e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}),"Завершить конференцию"]})})]})]})})]})}function Aa(){var w,h,u,g,S,j,p,_,H,ne,D,W,ee,re,G,Y,se,Q,X,O,z,Z,te,Se,Ne,Ce,Te,he,ye,ue,v,R,K,P,C,T,le,ie;const{toast:n}=be(),[a,s]=o.useState("dashboard"),{data:l,isLoading:m}=de({queryKey:["/api/user"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка доступа",description:"У вас нет прав для доступа к панели администратора",variant:"destructive"})}}}),i=(l==null?void 0:l.role)==="superadmin",c=(l==null?void 0:l.role)==="admin"||i,{data:r,isLoading:d}=de({queryKey:["/api/admin/stats"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка загрузки",description:"Не удалось загрузить статистику",variant:"destructive"})}}}),{data:t,isLoading:f}=de({queryKey:["/api/admin/system"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка",description:"Не удалось получить системную информацию",variant:"destructive"})}}}),{data:x,isLoading:N}=de({queryKey:["/api/admin/payment-settings"],retry:1,meta:{errorHandler:()=>{n({title:"Ошибка",description:"Не удалось загрузить настройки",variant:"destructive"})}}});return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Панель администратора Ikarus"}),!m&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(q,{variant:i?"destructive":"default",children:i?"Суперадмин":c?"Администратор":"Пользователь"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:l==null?void 0:l.username})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Версия 1.2.0"})]}),m?e.jsx("div",{className:"flex items-center justify-center h-[50vh]",children:e.jsx(k,{className:"h-12 w-12 animate-spin text-primary"})}):c||i?e.jsxs(Ns,{value:a,onValueChange:s,className:"space-y-4",children:[e.jsxs(ys,{className:"grid grid-cols-6 md:grid-cols-7 lg:w-auto",children:[e.jsxs(ce,{value:"dashboard",children:[e.jsx(Ht,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Дашборд"})]}),e.jsxs(ce,{value:"users",children:[e.jsx(os,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Пользователи"})]}),e.jsxs(ce,{value:"conferences",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Конференции"})]}),e.jsxs(ce,{value:"payments",children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Платежи"})]}),e.jsxs(ce,{value:"notifications",children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Уведомления"})]}),i&&e.jsxs(ce,{value:"settings",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Настройки"})]}),i&&e.jsxs(ce,{value:"statistics",children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Статистика"})]}),i&&e.jsxs(ce,{value:"system",children:[e.jsx($t,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Система"})]})]}),e.jsxs(oe,{value:"dashboard",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(E,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Пользователей"}),e.jsx(os,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d?e.jsx(k,{className:"h-4 w-4 animate-spin"}):((w=r==null?void 0:r.userCount)==null?void 0:w.count)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",d?"...":((h=r==null?void 0:r.newUsers)==null?void 0:h.count)||0," за 24ч"]})]})]}),e.jsxs(E,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Доход"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d?e.jsx(k,{className:"h-4 w-4 animate-spin"}):`${((((u=r==null?void 0:r.totalRevenue)==null?void 0:u.sum)||0)/100).toFixed(0)} ₽`}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",d?"...":`${((((g=r==null?void 0:r.revenueToday)==null?void 0:g.sum)||0)/100).toFixed(0)} ₽`," сегодня"]})]})]}),e.jsxs(E,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Активные конференции"}),e.jsx(ds,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d?e.jsx(k,{className:"h-4 w-4 animate-spin"}):((S=r==null?void 0:r.activeConferences)==null?void 0:S.count)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Всего: ",d?"...":((j=r==null?void 0:r.conferenceCount)==null?void 0:j.count)||0]})]})]}),e.jsxs(E,{children:[e.jsxs(A,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Pro подписки"}),e.jsx(It,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d?e.jsx(k,{className:"h-4 w-4 animate-spin"}):((p=r==null?void 0:r.proUsers)==null?void 0:p.count)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d?"...":`${((((_=r==null?void 0:r.proUsers)==null?void 0:_.count)||0)/(((H=r==null?void 0:r.userCount)==null?void 0:H.count)||1)*100).toFixed(1)}%`," от всех пользователей"]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(E,{className:"col-span-1",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Последние платежи"}),e.jsx(V,{children:"10 последних транзакций в системе"})]}),e.jsx(M,{children:d?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):r!=null&&r.recentPayments&&r.recentPayments.length>0?e.jsx("div",{className:"space-y-2",children:((r==null?void 0:r.recentPayments)||[]).map(L=>e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:L.username}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(L.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"text-sm font-bold",children:[(L.amount/100).toFixed(0)," ₽"]})]},L.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Нет данных о платежах"})})]}),e.jsxs(E,{className:"col-span-1",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Новые пользователи"}),e.jsx(V,{children:"10 последних зарегистрированных пользователей"})]}),e.jsx(M,{children:d?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):r!=null&&r.recentUsers&&r.recentUsers.length>0?e.jsx("div",{className:"space-y-2",children:((r==null?void 0:r.recentUsers)||[]).map(L=>e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:L.username}),e.jsx("span",{className:"text-xs text-muted-foreground",children:L.email})]}),e.jsx("div",{className:"text-xs",children:new Date(L.createdAt).toLocaleDateString()})]},L.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Нет данных о новых пользователях"})})]})]})]}),e.jsx(oe,{value:"users",className:"space-y-4",children:e.jsxs(E,{className:"col-span-4",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Управление пользователями"}),e.jsx(V,{children:"Просмотр и управление пользователями системы"})]}),e.jsx(M,{children:e.jsx(Sa,{})})]})}),e.jsx(oe,{value:"conferences",className:"space-y-4",children:e.jsxs(E,{className:"col-span-4",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Управление конференциями"}),e.jsx(V,{children:"Просмотр и управление видеоконференциями в системе"})]}),e.jsx(M,{children:e.jsx(Pa,{})})]})}),e.jsx(oe,{value:"payments",className:"space-y-4",children:e.jsxs(E,{className:"col-span-4",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Управление платежами"}),e.jsx(V,{children:"Просмотр и управление финансовыми операциями"})]}),e.jsx(M,{children:e.jsx(Ta,{})})]})}),e.jsx(oe,{value:"notifications",className:"space-y-4",children:e.jsxs(E,{className:"col-span-4",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Управление уведомлениями"}),e.jsx(V,{children:"Отправка и настройка уведомлений через Telegram"})]}),e.jsx(M,{children:e.jsx(ba,{})})]})}),i&&e.jsx(oe,{value:"settings",className:"space-y-4",children:e.jsxs(E,{className:"col-span-4",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Настройки системы"}),e.jsx(V,{children:"Управление настройками платежных систем и ограничениями"})]}),e.jsx(M,{children:N?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"YooKassa API"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:"ID магазина"}),e.jsx("span",{className:"text-sm",children:((ne=x==null?void 0:x.yookassa)==null?void 0:ne.shopId)||"Не настроено"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:"Секретный ключ"}),e.jsx("span",{className:"text-sm",children:(D=x==null?void 0:x.yookassa)!=null&&D.secretKey?"••••••••"+(((ee=x==null?void 0:x.yookassa)==null?void 0:ee.secretKey.substring(((W=x==null?void 0:x.yookassa)==null?void 0:W.secretKey.length)-4))||""):"Не настроено"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Stripe API"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:"Публичный ключ"}),e.jsx("span",{className:"text-sm",children:(re=x==null?void 0:x.stripe)!=null&&re.publicKey?"••••••••"+(((Y=x==null?void 0:x.stripe)==null?void 0:Y.publicKey.substring(((G=x==null?void 0:x.stripe)==null?void 0:G.publicKey.length)-4))||""):"Не настроено"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:"Секретный ключ"}),e.jsx("span",{className:"text-sm",children:(se=x==null?void 0:x.stripe)!=null&&se.secretKey?"••••••••"+(((X=x==null?void 0:x.stripe)==null?void 0:X.secretKey.substring(((Q=x==null?void 0:x.stripe)==null?void 0:Q.secretKey.length)-4))||""):"Не настроено"})]})]})]})]})})]})}),i&&e.jsx(oe,{value:"statistics",className:"space-y-4",children:e.jsxs(E,{className:"col-span-4",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Расширенная статистика"}),e.jsx(V,{children:"Детальная статистика по платежам и подпискам"})]}),e.jsx(M,{children:e.jsx(Ca,{})})]})}),i&&e.jsx(oe,{value:"system",className:"space-y-4",children:e.jsxs(E,{className:"col-span-4",children:[e.jsxs(A,{children:[e.jsx(I,{children:"Системная информация"}),e.jsx(V,{children:"Мониторинг системы, логи и диагностика"})]}),e.jsx(M,{children:f?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsx(A,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Сервер"})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ОС:"}),e.jsxs("span",{className:"text-sm font-medium",children:[(O=t==null?void 0:t.os)==null?void 0:O.type," ",(z=t==null?void 0:t.os)==null?void 0:z.release]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"CPU:"}),e.jsxs("span",{className:"text-sm font-medium",children:[(Z=t==null?void 0:t.cpu)==null?void 0:Z.usage.toFixed(1),"% (",(te=t==null?void 0:t.cpu)==null?void 0:te.model,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Память:"}),e.jsxs("span",{className:"text-sm font-medium",children:[(Se=t==null?void 0:t.memory)==null?void 0:Se.used," / ",(Ne=t==null?void 0:t.memory)==null?void 0:Ne.total]})]})]})})]}),e.jsxs(E,{children:[e.jsx(A,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"База данных"})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Статус:"}),e.jsx(q,{variant:((Ce=t==null?void 0:t.database)==null?void 0:Ce.status)==="online"?"success":"destructive",children:((Te=t==null?void 0:t.database)==null?void 0:Te.status)==="online"?"В сети":"Офлайн"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Размер:"}),e.jsx("span",{className:"text-sm font-medium",children:(he=t==null?void 0:t.database)==null?void 0:he.size})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Соединения:"}),e.jsx("span",{className:"text-sm font-medium",children:(ye=t==null?void 0:t.database)==null?void 0:ye.connections})]})]})})]}),e.jsxs(E,{children:[e.jsx(A,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"WebRTC"})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Статус:"}),e.jsx(q,{variant:((ue=t==null?void 0:t.webrtc)==null?void 0:ue.status)==="online"?"default":"destructive",children:((v=t==null?void 0:t.webrtc)==null?void 0:v.status)==="online"?"В сети":"Офлайн"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Соединения:"}),e.jsx("span",{className:"text-sm font-medium",children:(R=t==null?void 0:t.webrtc)==null?void 0:R.connections})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Трафик:"}),e.jsxs("span",{className:"text-sm font-medium",children:["↓",(K=t==null?void 0:t.webrtc)==null?void 0:K.incomingTraffic," ↑",(P=t==null?void 0:t.webrtc)==null?void 0:P.outgoingTraffic]})]})]})})]}),e.jsxs(E,{children:[e.jsx(A,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Telegram бот"})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Статус:"}),e.jsx(q,{variant:((C=t==null?void 0:t.telegram)==null?void 0:C.status)==="online"?"default":"destructive",children:((T=t==null?void 0:t.telegram)==null?void 0:T.status)==="online"?"В сети":"Офлайн"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Пользователи:"}),e.jsx("span",{className:"text-sm font-medium",children:((le=t==null?void 0:t.telegram)==null?void 0:le.users)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Запросы:"}),e.jsx("span",{className:"text-sm font-medium",children:((ie=t==null?void 0:t.telegram)==null?void 0:ie.requests)||0})]}),e.jsxs(ss,{children:[e.jsx(Mt,{asChild:!0,children:e.jsx(xe,{variant:"outline",size:"sm",className:"w-full mt-2",children:"Настроить бота"})}),e.jsxs(ts,{className:"sm:max-w-md",children:[e.jsxs(as,{children:[e.jsx(ns,{children:"Настройка Telegram бота"}),e.jsx(rs,{children:"Введите токен вашего Telegram бота, чтобы подключить его к системе. Для создания бота используйте @BotFather в Telegram."})]}),e.jsx(ot,{})]})]})]})})]})]}),e.jsxs(E,{children:[e.jsxs(A,{children:[e.jsx(I,{children:"Лог событий"}),e.jsx(V,{children:"Последние 20 событий системы"})]}),e.jsx(M,{children:e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs(Ie,{children:[e.jsx(Me,{children:e.jsxs($,{children:[e.jsx(b,{children:"Время"}),e.jsx(b,{children:"Уровень"}),e.jsx(b,{children:"Сообщение"})]})}),e.jsx(ke,{children:t!=null&&t.logs&&t.logs.length>0?t.logs.map((L,Le)=>e.jsxs($,{children:[e.jsx(y,{children:new Date(L.timestamp).toLocaleString()}),e.jsx(y,{children:e.jsx(q,{variant:L.level==="error"||L.level==="warning"?"destructive":L.level==="info"?"default":"outline",children:L.level.toUpperCase()})}),e.jsx(y,{children:L.message})]},Le)):e.jsx($,{children:e.jsx(y,{colSpan:3,className:"text-center py-4",children:"Нет данных в логе"})})})]})})})]})]})})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] p-8 text-center",children:[e.jsx(kt,{className:"h-16 w-16 text-destructive mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Доступ запрещен"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"У вас нет прав для доступа к панели администратора. Эта функция доступна только для администраторов системы."})]})]})}export{Aa as default};
